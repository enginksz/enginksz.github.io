<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Use of Kalman Filter in Autonomous Vehicles | Engin Oksuz </title> <meta name="author" content="Engin Oksuz"> <meta name="description" content="This project explores the implementation of obstacle avoidance in autonomous systems using imitation learning. The aim is to train agents to navigate environments while effectively avoiding obstacles."> <meta name="keywords" content="autonomous driving, perception, path planning,computer vision"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://enginksz.github.io/projects/kalman_filter/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Engin</span> Oksuz </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Use of Kalman Filter in Autonomous Vehicles</h1> <p class="post-description">This project explores the implementation of obstacle avoidance in autonomous systems using imitation learning. The aim is to train agents to navigate environments while effectively avoiding obstacles.</p> </header> <article> <h1 id="use-of-kalman-filter-in-autonomous-vehicles">Use of Kalman Filter in Autonomous Vehicles</h1> <p>In autonomous driving systems, the detection of static and dynamic objects in the environment is a critical requirement for the safe and efficient control of vehicle motion dynamics. These systems utilize various sensors such as <strong>LIDAR, radar, cameras, and GPS</strong> to collect environmental data, which is then used to plan the vehicleâ€™s movements. The data obtained from these sensors allows for the detection and tracking of other vehicles, pedestrians, cyclists, and other objects in the vicinity.</p> <p>However, sensor data alone is insufficient. Autonomous systems must be capable of <strong>accurately predicting the future positions</strong> of both the vehicle itself and surrounding dynamic objects. These predictions are crucial for <strong>motion planning, route optimization</strong>, and <strong>collision avoidance systems</strong>. Specifically, parameters such as speed, direction, and acceleration must be dynamically analyzed to identify potential collision scenarios in advance.</p> <p>This prediction process is challenging due to noise in sensor data and uncertainties in system modeling. Sensor measurements can be corrupted by environmental conditions or inherent limitations of the sensors themselves. For instance, radar signals may weaken in rainy conditions, LIDAR devices might misinterpret objects in foggy environments, and camera sensors can be sensitive to changes in lighting. These uncertainties are persistent challenges in real-world scenarios and necessitate strategies to minimize such errors.</p> <p>At this juncture, sensor fusion and prediction algorithms become essential in autonomous driving systems. Combining data from different sensors compensates for the weaknesses of individual sensors, resulting in more reliable environmental perception. The Kalman Filter is a widely used method in such sensor fusion systems. The Kalman Filter provides optimal state estimations for linear dynamic systems. By utilizing current sensor measurements, the vehicle estimates its own state (position, velocity, acceleration) while simultaneously predicting the future states of surrounding objects.</p> <p>The Kalman Filter minimizes measurement noise and model uncertainties from each sensor, delivering the most probable state and prediction. Operating with mathematical tools such as state-space models, noise covariance matrices, and dynamic system matrices, this filter continuously updates and refines the systemâ€™s state changes over time. Essentially, the Kalman Filter integrates the current state with the predicted state, minimizing noise levels and errors to provide a final, accurate prediction.</p> <p>Successful implementation of this approach requires modeling linear dynamic systems, matrix algebra, Markov processes, and covariance analysesâ€”advanced mathematical techniques. Additionally, each sensorâ€™s data accuracy and error models must be meticulously analyzed and appropriately integrated into the filter.</p> <p>Through these techniques, autonomous driving systems not only comprehend the current state but also predict future states with high accuracy by reducing uncertainties, thereby ensuring safe and efficient driving.</p> <h1 id="kalman-filter">Kalman Filter</h1> <h2 id="sensor-data-and-noise">Sensor Data and Noise</h2> <p>An autonomous vehicle receives data from a GPS sensor with an accuracy precision of approximately 5-10 meters. This level of accuracy is inadequate for autonomous driving, as higher precision is required to anticipate and prevent accidents. For example, in a forested or rural area where the robot navigates through terrains with pits and cliffs, inaccurate measurements exceeding a few meters could result in the robot falling. Therefore, relying solely on GPS data is insufficient. Instead, it is necessary to integrate the vehicleâ€™s motion dynamics with data from additional sensors.</p> <p>We also possess knowledge about the robotâ€™s movement: commands are sent to the wheel or track motors, and if the robot is moving in a particular direction without any obstacles, it is likely to continue moving in that direction in the next instant. However, we do not have complete information about the movement: the robot can be pushed by wind, wheels might slip slightly, or it may roll unpredictably on uneven terrain. Consequently, the amount of wheel rotation may not accurately represent the actual distance traveled by the robot, leading to imperfect predictions. Additionally, sensors used to monitor the robotâ€™s movement (e.g., accelerometers and gyroscopes) can be subject to noise, affecting the accuracy of predictions. These uncertainties and errors are critical factors that must be considered in the robotâ€™s position and motion estimations.</p> <h2 id="mathematical-model-construction">Mathematical Model Construction</h2> <p>Assume that our autopilot system has a state vector (ğ‘¥) representing the vehicleâ€™s position (ğ‘) and velocity (ğ‘£):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                       ğ‘¥ğ‘˜ = [ ğ‘ ğ‘£]
</code></pre></div></div> <p>The state vector encompasses the fundamental parameters of our system, which can be expanded as needed. For instance, the state vector could include fuel level, engine temperature, or data from other sensors.</p> <h2 id="state-transition-model">State Transition Model</h2> <p>To model the movement of our autopilot system, we use the state transition equation. These equations predict the vehicleâ€™s next state based on the current state and control inputs. A simple linear model is expressed as follows:</p> <h3 id="kalman-filter-steps">Kalman Filter Steps</h3> <p>The Kalman Filter algorithm consists of two main stages: Prediction and Update. These steps reduce noise and uncertainties in sensor data, enabling more accurate state estimations.</p> <p>Prediction: The current state is predicted. Update: The predicted state is updated using measurement data.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/kalmansteps.png" sizes="95vw"></source> <img src="/assets/img/kalmansteps.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Kalman Filter Steps Image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Here:</p> <p>ğ‘¥^ğ‘˜ âˆ£ğ‘˜âˆ’1 : Predicted state at time ğ‘˜</p> <p>ğ‘¥^ğ‘˜âˆ£ğ‘˜ : Updated state at time ğ‘˜</p> <p>ğ‘ƒğ‘˜âˆ£ğ‘˜âˆ’1 : Predicted error covariance at time ğ‘˜</p> <p>ğ‘ƒğ‘˜âˆ£ğ‘˜ : Updated error covariance at time ğ‘˜</p> <p>ğ´: State transition matrix</p> <p>ğµ: Control input matrix</p> <p>ğ‘¢ğ‘˜ : Control input at time ğ‘˜</p> <p>ğ‘„: Process noise covariance matrix</p> <p>ğ»: Measurement matrix</p> <p>ğ‘…: Measurement noise covariance matrix</p> <p>ğ‘§ğ‘˜ : Measurement at time ğ‘˜</p> <p>ğ¼: Identity matrix</p> <p>As previously mentioned, understanding the Kalman Filter from definitions and complex equations alone is nearly impossible. Therefore, in most cases, state matrices are simplified, resulting in the more manageable equations shown below:</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/kalmanstep1.png" sizes="95vw"></source> <img src="/assets/img/kalmanstep1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Kalman Filter Measurement Image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Here, the subscript ğ‘˜ indices represent different states. These indices can be considered as separate time intervals; for example, ğ‘˜=1 corresponds to 1 ms, and ğ‘˜=2 corresponds to 2 ms.</p> <h4 id="step-1-model-construction">Step 1: Model Construction</h4> <p>In the first step, we perform model construction, thereby determining the ğ´, ğµ, and ğ» matrices. These matrices are typically constant values, often equal to 1.</p> <h4 id="step-2-determining-noise-matrices">Step 2: Determining Noise Matrices</h4> <p>The most challenging step is determining the ğ‘…(measurement noise covariance matrix) and ğ‘„ (process noise covariance matrix). Finding ğ‘… is generally more straightforward because we have clear information about the sources of environmental noise. However, determining ğ‘„ is more complex, and providing a specific method at this stage is difficult.</p> <h4 id="step-3-initializing-the-process">Step 3: Initializing the Process</h4> <p>To initialize the Kalman Filter, we need initial estimates for the starting state (ğ‘¥0) and the initial error covariance (ğ‘ƒ0).</p> <p>Measurement uncertainty (i.e., variance) determines how much the Kalman Gain (ğ¾) should be weighted. Specifically, the higher the measurement uncertainty, the smaller the Kalman Gain needs to be to prevent the measurement from overly influencing the state vector estimation.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/kalmanstep2.png" sizes="95vw"></source> <img src="/assets/img/kalmanstep2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Kalman Filter Measurement Image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Donâ€™t be intimidated by this expression. We are performing matrix multiplications, but fundamentally, what happens is that we multiply matrices containing the measurement variance and then invert them, subsequently multiplying by the predicted covariance. Because we take the inverse, as the measurement variance increases, the value of this multiplication decreases. Consequently, the higher the measurement variance, the less informative the measurement is. The Kalman Gain ensures that this information is appropriately factored into the final state estimation. I recommend deriving this expression manually to gain a deeper understanding.</p> <p>Thus, in the next step of the Kalman Filterâ€”the update phaseâ€”we use the update equations to obtain the final state estimation (ğ‘¥^ğ‘˜) and its covariance as described above.</p> <h4 id="iteration-process">Iteration Process</h4> <p>The obtained state vector prediction and covariance prediction are used as prior information in the next step. Here, we employ a Bayesian approach. The posterior distribution obtained is used as the prior distribution in the next iteration. The filter continues to operate iteratively, and as new information arrives, the variance of the estimation error decreases.</p> <h2 id="kalman-filter-implementation-c-example">Kalman Filter Implementation: C++ Example</h2> <p>Letâ€™s implement a simple Kalman Filter in C++:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;Eigen/Dense&gt;</span><span class="c1"> </span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">Eigen</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">KalmanFilter</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">KalmanFilter</span><span class="p">(</span><span class="kt">double</span> <span class="n">dt</span><span class="p">,</span> <span class="k">const</span> <span class="n">MatrixXd</span><span class="o">&amp;</span> <span class="n">A</span><span class="p">,</span> <span class="k">const</span> <span class="n">MatrixXd</span><span class="o">&amp;</span> <span class="n">B</span><span class="p">,</span> <span class="k">const</span> <span class="n">MatrixXd</span><span class="o">&amp;</span> <span class="n">H</span><span class="p">,</span> <span class="k">const</span> <span class="n">MatrixXd</span><span class="o">&amp;</span> <span class="n">Q</span><span class="p">,</span> <span class="k">const</span> <span class="n">MatrixXd</span><span class="o">&amp;</span> <span class="n">R</span><span class="p">,</span> <span class="k">const</span> <span class="n">MatrixXd</span><span class="o">&amp;</span> <span class="n">P</span><span class="p">)</span>
        <span class="o">:</span> <span class="n">A</span><span class="p">(</span><span class="n">A</span><span class="p">),</span> <span class="n">B</span><span class="p">(</span><span class="n">B</span><span class="p">),</span> <span class="n">H</span><span class="p">(</span><span class="n">H</span><span class="p">),</span> <span class="n">Q</span><span class="p">(</span><span class="n">Q</span><span class="p">),</span> <span class="n">R</span><span class="p">(</span><span class="n">R</span><span class="p">),</span> <span class="n">P</span><span class="p">(</span><span class="n">P</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">rows</span><span class="p">(),</span> <span class="n">A</span><span class="p">.</span><span class="n">cols</span><span class="p">()),</span> <span class="n">x</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">rows</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">I</span><span class="p">.</span><span class="n">setIdentity</span><span class="p">();</span>
        <span class="n">x</span><span class="p">.</span><span class="n">setZero</span><span class="p">();</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">dt</span> <span class="o">=</span> <span class="n">dt</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">init</span><span class="p">(</span><span class="k">const</span> <span class="n">VectorXd</span><span class="o">&amp;</span> <span class="n">x0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">x0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">predict</span><span class="p">(</span><span class="k">const</span> <span class="n">VectorXd</span><span class="o">&amp;</span> <span class="n">u</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">A</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">B</span> <span class="o">*</span> <span class="n">u</span><span class="p">;</span>
        <span class="n">P</span> <span class="o">=</span> <span class="n">A</span> <span class="o">*</span> <span class="n">P</span> <span class="o">*</span> <span class="n">A</span><span class="p">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">+</span> <span class="n">Q</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="k">const</span> <span class="n">VectorXd</span><span class="o">&amp;</span> <span class="n">z</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">VectorXd</span> <span class="n">y</span> <span class="o">=</span> <span class="n">z</span> <span class="o">-</span> <span class="n">H</span> <span class="o">*</span> <span class="n">x</span><span class="p">;</span>
        <span class="n">MatrixXd</span> <span class="n">S</span> <span class="o">=</span> <span class="n">H</span> <span class="o">*</span> <span class="n">P</span> <span class="o">*</span> <span class="n">H</span><span class="p">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">+</span> <span class="n">R</span><span class="p">;</span>
        <span class="n">MatrixXd</span> <span class="n">K</span> <span class="o">=</span> <span class="n">P</span> <span class="o">*</span> <span class="n">H</span><span class="p">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">*</span> <span class="n">S</span><span class="p">.</span><span class="n">inverse</span><span class="p">();</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">K</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
        <span class="n">P</span> <span class="o">=</span> <span class="p">(</span><span class="n">I</span> <span class="o">-</span> <span class="n">K</span> <span class="o">*</span> <span class="n">H</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">VectorXd</span> <span class="n">state</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
    <span class="n">MatrixXd</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">I</span><span class="p">;</span>
    <span class="n">VectorXd</span> <span class="n">x</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">dt</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Time step</span>
    <span class="kt">double</span> <span class="n">dt</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

    <span class="c1">// State transition matrix (A)</span>
    <span class="n">MatrixXd</span> <span class="n">A</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">A</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span>
         <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Control input matrix (B)</span>
    <span class="n">MatrixXd</span> <span class="n">B</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">B</span> <span class="o">&lt;&lt;</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dt</span><span class="p">,</span>
         <span class="n">dt</span><span class="p">;</span>

    <span class="c1">// Measurement matrix (H)</span>
    <span class="n">MatrixXd</span> <span class="n">H</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">H</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">;</span>

    <span class="c1">// Process noise covariance matrix (Q)</span>
    <span class="n">MatrixXd</span> <span class="n">Q</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">Q</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
         <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Measurement noise covariance matrix (R)</span>
    <span class="n">MatrixXd</span> <span class="n">R</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">R</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Initial error covariance matrix (P)</span>
    <span class="n">MatrixXd</span> <span class="n">P</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">P</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
         <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Kalman Filter object</span>
    <span class="n">KalmanFilter</span> <span class="n">kf</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">P</span><span class="p">);</span>

    <span class="c1">// Initial state</span>
    <span class="n">VectorXd</span> <span class="n">x0</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">x0</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">kf</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="n">x0</span><span class="p">);</span>

    <span class="c1">// Control input (acceleration) and measurement data</span>
    <span class="n">VectorXd</span> <span class="n">u</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">u</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// Constant acceleration</span>

    <span class="n">VectorXd</span> <span class="n">z</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// Measurement data</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">kf</span><span class="p">.</span><span class="n">predict</span><span class="p">(</span><span class="n">u</span><span class="p">);</span>

        <span class="c1">// Example measurement (adding a bit of random noise to the true value)</span>
        <span class="n">z</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="n">rand</span><span class="p">()</span> <span class="o">/</span> <span class="n">RAND_MAX</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">);</span>

        <span class="n">kf</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">);</span>

        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Estimated state: "</span> <span class="o">&lt;&lt;</span> <span class="n">kf</span><span class="p">.</span><span class="n">state</span><span class="p">().</span><span class="n">transpose</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div> <p>In this code, we implemented a Kalman filter using the Eigen library. Eigen allows us to easily perform linear algebra operations. We defined all the matrices and the initial state required for creating the Kalman filter. In the main function, the prediction and update steps are executed over a certain time step, and the results are printed.</p> <h2 id="advantages-of-the-kalman-filter">Advantages of the Kalman Filter</h2> <p>Optimal State Estimation: Under the assumptions of linearity and Gaussian distributions, the Kalman filter provides the best minimum mean square error (MMSE) estimate. Noise Reduction: It accounts for both process and measurement noise, yielding more accurate predictions.</p> <p>Real-Time Application: Being computationally efficient, it can be applied in real-time systems.</p> <h2 id="application-example">Application Example</h2> <p>In our autopilot system, the Kalman filter is applied using the vehicleâ€™s current position and speed alongside measurements from the GPS. The state transition model includes the vehicleâ€™s dynamics and control inputs (e.g., acceleration or steering angle), while the observation model represents the accuracy of the data coming from the GPS sensor. The Kalman filter combines these two pieces of information to provide a more accurate estimation of the vehicleâ€™s position and speed.</p> <p>For instance, after predicting the position and speed based on control inputs, the measurements from the GPS are used to correct these predictions. If the GPS measurements are noisy, the Kalman filter takes this noise into account, offering a more reliable estimate. Thus, the vehicleâ€™s position and speed can be tracked with higher accuracy, enabling necessary decisions for safe driving.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="k">class</span> <span class="nc">KalmanFilter</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        Initializes the Kalman Filter.
        
        Parameters:
        - A: State transition matrix
        - B: Control input matrix
        - H: Observation matrix
        - Q: Process noise covariance
        - R: Measurement noise covariance
        - P: Initial estimation error covariance
        - x: Initial state estimate
        </span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">A</span> <span class="o">=</span> <span class="n">A</span>
        <span class="n">self</span><span class="p">.</span><span class="n">B</span> <span class="o">=</span> <span class="n">B</span>
        <span class="n">self</span><span class="p">.</span><span class="n">H</span> <span class="o">=</span> <span class="n">H</span>
        <span class="n">self</span><span class="p">.</span><span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span>
        <span class="n">self</span><span class="p">.</span><span class="n">R</span> <span class="o">=</span> <span class="n">R</span>
        <span class="n">self</span><span class="p">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">P</span>
        <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        Predicts the next state and estimation error covariance.
        
        Parameters:
        - u: Control input
        </span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">A</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">B</span><span class="p">,</span> <span class="n">u</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">A</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">P</span><span class="p">),</span> <span class="n">self</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="n">T</span><span class="p">)</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">Q</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        Updates the state estimate and estimation error covariance using the measurement z.
        
        Parameters:
        - z: Measurement vector
        </span><span class="sh">"""</span>
        <span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">H</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">P</span><span class="p">),</span> <span class="n">self</span><span class="p">.</span><span class="n">H</span><span class="p">.</span><span class="n">T</span><span class="p">)</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">R</span>
        <span class="n">K</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">P</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">H</span><span class="p">.</span><span class="n">T</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="nf">inv</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">z</span> <span class="o">-</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">H</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">eye</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">self</span><span class="p">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">((</span><span class="n">I</span> <span class="o">-</span> <span class="n">np</span><span class="p">.</span><span class="nf">dot</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">H</span><span class="p">)),</span> <span class="n">self</span><span class="p">.</span><span class="n">P</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">simulate_data</span><span class="p">(</span><span class="n">num_steps</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">initial_position</span><span class="p">,</span> <span class="n">initial_velocity</span><span class="p">,</span> <span class="n">acceleration</span><span class="p">,</span> <span class="n">gps_noise_std</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    Simulates true state and noisy GPS measurements.
    
    Parameters:
    - num_steps: Number of time steps
    - dt: Time step duration
    - initial_position: Initial position of the vehicle
    - initial_velocity: Initial velocity of the vehicle
    - acceleration: Constant acceleration of the vehicle
    - gps_noise_std: Standard deviation of GPS measurement noise
    
    Returns:
    - true_positions: Array of true positions
    - true_velocities: Array of true velocities
    - measurements: Array of GPS measurements
    </span><span class="sh">"""</span>
    <span class="n">true_positions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">true_velocities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">measurements</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">position</span> <span class="o">=</span> <span class="n">initial_position</span>
    <span class="n">velocity</span> <span class="o">=</span> <span class="n">initial_velocity</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_steps</span><span class="p">):</span>
        <span class="c1"># Update true state
</span>        <span class="n">velocity</span> <span class="o">+=</span> <span class="n">acceleration</span> <span class="o">*</span> <span class="n">dt</span>
        <span class="n">position</span> <span class="o">+=</span> <span class="n">velocity</span> <span class="o">*</span> <span class="n">dt</span>

        <span class="n">true_positions</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="n">true_velocities</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">velocity</span><span class="p">)</span>

        <span class="c1"># Simulate GPS measurement with noise
</span>        <span class="n">gps_measurement</span> <span class="o">=</span> <span class="n">position</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">gps_noise_std</span><span class="p">)</span>
        <span class="n">measurements</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">gps_measurement</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">true_positions</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">true_velocities</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">measurements</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Simulation parameters
</span>    <span class="n">num_steps</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># time step (seconds)
</span>    <span class="n">initial_position</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># meters
</span>    <span class="n">initial_velocity</span> <span class="o">=</span> <span class="mf">20.0</span>  <span class="c1"># meters/second
</span>    <span class="n">acceleration</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># meters/second^2
</span>    <span class="n">gps_noise_std</span> <span class="o">=</span> <span class="mf">10.0</span>  <span class="c1"># meters
</span>
    <span class="c1"># Simulate true state and measurements
</span>    <span class="n">true_positions</span><span class="p">,</span> <span class="n">true_velocities</span><span class="p">,</span> <span class="n">measurements</span> <span class="o">=</span> <span class="nf">simulate_data</span><span class="p">(</span>
        <span class="n">num_steps</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">initial_position</span><span class="p">,</span> <span class="n">initial_velocity</span><span class="p">,</span> <span class="n">acceleration</span><span class="p">,</span> <span class="n">gps_noise_std</span>
    <span class="p">)</span>

    <span class="c1"># Define Kalman Filter matrices
</span>    <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="n">dt</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>  <span class="c1"># State transition matrix
</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">dt</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span>
                  <span class="p">[</span><span class="n">dt</span><span class="p">]])</span>  <span class="c1"># Control input matrix
</span>
    <span class="n">H</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>  <span class="c1"># Observation matrix
</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>  <span class="c1"># Process noise covariance
</span>
    <span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="n">gps_noise_std</span><span class="o">**</span><span class="mi">2</span><span class="p">]])</span>  <span class="c1"># Measurement noise covariance
</span>
    <span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]])</span>  <span class="c1"># Initial estimation error covariance
</span>
    <span class="n">x_initial</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">],</span>
                          <span class="p">[</span><span class="mi">0</span><span class="p">]])</span>  <span class="c1"># Initial state estimate
</span>
    <span class="c1"># Control input (acceleration)
</span>    <span class="n">u</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="n">acceleration</span><span class="p">]])</span>

    <span class="c1"># Initialize Kalman Filter
</span>    <span class="n">kf</span> <span class="o">=</span> <span class="nc">KalmanFilter</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">x_initial</span><span class="p">)</span>

    <span class="c1"># Lists to store estimates
</span>    <span class="n">estimated_positions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">estimated_velocities</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_steps</span><span class="p">):</span>
        <span class="c1"># Predict
</span>        <span class="n">kf</span><span class="p">.</span><span class="nf">predict</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>

        <span class="c1"># Update with measurement
</span>        <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="n">measurements</span><span class="p">[</span><span class="n">i</span><span class="p">]]])</span>
        <span class="n">kf</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>

        <span class="c1"># Store estimates
</span>        <span class="n">estimated_positions</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">kf</span><span class="p">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">estimated_velocities</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">kf</span><span class="p">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

    <span class="c1"># Plotting the results
</span>    <span class="n">time_steps</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="n">num_steps</span><span class="p">)</span> <span class="o">*</span> <span class="n">dt</span>

    <span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

    <span class="c1"># Position plot
</span>    <span class="n">plt</span><span class="p">.</span><span class="nf">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time_steps</span><span class="p">,</span> <span class="n">true_positions</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">True Position</span><span class="sh">'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">g</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">scatter</span><span class="p">(</span><span class="n">time_steps</span><span class="p">,</span> <span class="n">measurements</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">GPS Measurements</span><span class="sh">'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time_steps</span><span class="p">,</span> <span class="n">estimated_positions</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Kalman Filter Estimate</span><span class="sh">'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">b</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="sh">'</span><span class="s">Kalman Filter Position Estimation</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Time [s]</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Position [m]</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1"># Velocity plot
</span>    <span class="n">plt</span><span class="p">.</span><span class="nf">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time_steps</span><span class="p">,</span> <span class="n">true_velocities</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">True Velocity</span><span class="sh">'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">g</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time_steps</span><span class="p">,</span> <span class="n">estimated_velocities</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Kalman Filter Estimate</span><span class="sh">'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">b</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="sh">'</span><span class="s">Kalman Filter Velocity Estimation</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Time [s]</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Velocity [m/s]</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">plt</span><span class="p">.</span><span class="nf">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">"</span><span class="s">__main__</span><span class="sh">"</span><span class="p">:</span>
    <span class="nf">main</span><span class="p">()</span>


</code></pre></div></div> <h3 id="graphics">Graphics</h3> <div class="row justify-content-sm-center"> <div class="col-sm-10 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/Figure_1.png" sizes="95vw"></source> <img src="/assets/img/Figure_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Kalman Filter Measurement Image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row justify-content-sm-center"> <div class="col-sm-10 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/Figure_2.png" sizes="95vw"></source> <img src="/assets/img/Figure_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Kalman Filter Measurement Image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h2 id="conclusion">Conclusion</h2> <p>The Kalman Filter minimizes uncertainties in autonomous driving systems, providing more accurate and reliable state estimations. Through the state transition model and the observation model, it effectively combines the vehicleâ€™s dynamics and environmental data. This enables both understanding the current state and predicting future movements. Successful implementation of the Kalman Filter requires advanced mathematical techniques such as modeling linear dynamic systems, matrix algebra, Markov processes, and covariance analyses.</p> <p>Kalman Filter PDF [https://web.mit.edu/kirtley/kirtley/binlustuff/literature/control/Kalman%20filter.pdf]</p> <p>Tayyarg GitHub - Kalman Filtering [https://tayyarg.github.io/kalman-filtreleme/]</p> </article> <div id="giscus_thread" style="max-width: 930px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"enginksz/enginksz.github.io","data-repo-id":"","data-category":"","data-category-id":"","data-mapping":"","data-strict":"","data-reactions-enabled":"","data-emit-metadata":"","data-input-position":"","data-theme":giscusTheme,"data-lang":"",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> Â© Copyright 2025 Engin Oksuz. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-publications",title:"publications",description:"publications by categories in reversed chronological order. generated by jekyll-scholar.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"A growing collection of your cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Edit the `_data/repositories.yml` and change the `github_users` and `github_repos` lists to include your own GitHub profile and repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"You can reach my curricullum vitae from this webpage or you can just click to the pdf button.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"news-thesis-embedded-ai-based-image-matching-method-and-application-in-uav",title:"Thesis: Embedded AI Based Image Matching Method and Application In UAV",description:"",section:"News"},{id:"news-new-project-obstacle-avoidance-with-imitation-learning",title:"New Project: Obstacle Avoidance with Imitation Learning",description:"",section:"News"},{id:"news-new-project-yolov8-with-ros2",title:"New Project: YOLOv8 with ROS2",description:"",section:"News"},{id:"news-new-project-kalman-filter-for-autonomous-vehicles",title:"New Project: Kalman Filter for Autonomous Vehicles",description:"",section:"News"},{id:"news-new-project-deep-reinforcement-learning-for-mobile-robot-navigation",title:"New Project: Deep Reinforcement Learning for Mobile Robot Navigation",description:"",section:"News"},{id:"projects-obstacle-avoidance-with-imitation-learning",title:"Obstacle Avoidance with Imitation Learning",description:"This project explores the implementation of obstacle avoidance in autonomous systems using imitation learning. The aim is to train agents to navigate environments while effectively avoiding obstacles.",section:"Projects",handler:()=>{window.location.href="/projects/ImitationLearning/"}},{id:"projects-lio-sam-gazebo-ros2",title:"LIO-SAM Gazebo ROS2",description:"This repository contains the implementation of LIO-SAM (Lidar Inertial Odometry via Smoothing and Mapping) integrated with ROS 2 (Robot Operating System 2) for robust and accurate SLAM (Simultaneous Localization and Mapping) applications.",section:"Projects",handler:()=>{window.location.href="/projects/LIO-SAM-ROS2/"}},{id:"projects-yolov8-with-ros2",title:"YOLOv8 with ROS2",description:"This repository contains the implementation of **YOLOv8** integrated with **ROS 2 (Robot Operating System 2)** for real-time object detection.",section:"Projects",handler:()=>{window.location.href="/projects/YOLOv8-with-ROS2/"}},{id:"projects-deep-reinforcement-learning-for-mobile-robot-navigation",title:"Deep Reinforcement Learning for Mobile Robot Navigation",description:"This project implements **Deep Reinforcement Learning (DRL)** for mobile robot navigation using the Twin Delayed Deep Deterministic Policy Gradient (TD3) algorithm.",section:"Projects",handler:()=>{window.location.href="/projects/deepreinforcementlearning/"}},{id:"projects-use-of-kalman-filter-in-autonomous-vehicles",title:"Use of Kalman Filter in Autonomous Vehicles",description:"This project explores the implementation of obstacle avoidance in autonomous systems using imitation learning. The aim is to train agents to navigate environments while effectively avoiding obstacles.",section:"Projects",handler:()=>{window.location.href="/projects/kalman_filter/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%65%6E%67%69%6E%6B%73%7A@%68%6F%74%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=PyYQXbwAAAAJ","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/enginksz","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/enginksz","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>